# Localization Guidelines

The layout editor now ships with a locale bundle that centralizes all human-facing
strings. Components can request the bundle to render their UI, and integrators can
provide overrides to adapt the editor to different languages or project-specific
terminology.

## Default bundle

The default German bundle is defined in `src/i18n/strings.ts`. It groups strings by
feature area (e.g. inspector actions, container helpers, layout controls) so that
call sites can consume intent-driven keys rather than hard-coded sentences.

```ts
import { createLayoutEditorStrings } from "../i18n/strings";

const strings = createLayoutEditorStrings();
console.log(strings.inspector.heading); // => "Eigenschaften"
```

`createLayoutEditorStrings()` always returns a deep clone of the default bundle, so
callers can safely mutate the result without affecting subsequent requests.

## Providing overrides

`createLayoutEditorStrings(overrides)` accepts a partial bundle that is deeply
merged into the defaults. Any keys that are not overridden will continue to fall
back to the German originals.

```ts
import { createLayoutEditorStrings } from "../i18n/strings";

const strings = createLayoutEditorStrings({
    inspector: {
        heading: "Properties",
        container: {
            noneOption: "No container",
        },
    },
});
```

Only the provided keys change; nested structures retain the default text where no
override is defined. Tests in `tests/i18n-loading.test.ts` protect this fallback
behavior.

## Injecting strings into presenters

Presenters such as the inspector panel receive their text bundle through their
dependencies. `renderInspectorPanel` accepts either a full locale bundle or a set of
override values:

```ts
import { renderInspectorPanel } from "../inspector-panel";
import { createLayoutEditorStrings } from "../i18n/strings";

const customStrings = createLayoutEditorStrings({
    inspector: { heading: "Properties" },
});

renderInspectorPanel({
    host,
    element,
    elements,
    definitions,
    canvasWidth,
    canvasHeight,
    callbacks,
    locale: customStrings,
});
```

If `locale` is omitted, the inspector automatically falls back to the default bundle.
You can also pass `localeOverrides` directly to reuse the merging helper inside the
component:

```ts
renderInspectorPanel({
    // ...other dependencies,
    localeOverrides: {
        inspector: { actions: { delete: "Remove element" } },
    },
});
```

## Formatting helpers

Use `formatLayoutString(template, params)` to inject variables into localized
sentences. The helper replaces `{placeholder}` tokens with the provided values and
keeps unknown placeholders intact so that templates remain readable in tests and
logs.

```ts
import { formatLayoutString } from "../i18n/strings";

formatLayoutString("{child} (in {parent})", { child: "Label", parent: "Group" });
// => "Label (in Group)"
```

## Testing checklist

* Add unit tests for new locale keys or formatting logic in `tests/i18n-loading.test.ts`.
* Verify that overrides do not mutate the default bundle.
* Ensure every presenter consumes strings from the locale bundle rather than
  embedding sentences in code.
